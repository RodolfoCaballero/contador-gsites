<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <title>Contador de visitas</title>
  <style>
    body{margin:0;background:#001f3f;display:flex;align-items:center;
         justify-content:center;height:100vh;font-family:'Courier New',monospace}
    .counter{background:#0074D9;color:#fff;padding:8px 16px;border-radius:4px;
             font-size:32px;letter-spacing:4px;min-width:180px;text-align:center}
  </style>
</head>
<body>
  <div id="contador" class="counter">00000</div>

  <script>
    /* 1. URL del Apps Script (cÃ¡mbiala por la tuya) */
    const URL = 'https://script.google.com/macros/s/AKfycbyxSBdT7tEyfErQOgR5Qw_1McHdGdMaVPxyRTYimDawBAfnLKLh2Z57znJS2aF2P_4CUA/exec';

    /* 2. Marca para no volver a contar en este navegador */
    const MARK = 'gsites_counted';

    (async () => {
      try {
        // Mostrar cifra actual
        const r1 = await fetch(URL);
        const current = await r1.text();
        document.getElementById('contador').textContent = current;

        // Incrementar solo la primera vez
        if (!localStorage.getItem(MARK)) {
          await fetch(URL, {method: 'POST'});   // llama a doPost
          localStorage.setItem(MARK, '1');
          // Opcional: refrescar para mostrar la nueva cifra
          const r2 = await fetch(URL);
          document.getElementById('contador').textContent = await r2.text();
        }
      } catch (e) {
        document.getElementById('contador').textContent = 'ERROR';
      }
    })();
  </script>
</body>
</html>
